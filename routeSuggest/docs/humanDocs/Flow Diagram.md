flowchart TD
  S[開始]
  --> U1[ユーザーが出発地点を入力]
  --> U2[ユーザーが苦手項目を入力]
  --> U3[ユーザーが制約を入力]
  --> FE[フロントがバックエンドへ送信]
  --> BE[バックエンドが受信]

  BE --> G{出発地点は住所か}
  G -->|はい| GEO[住所を座標に変換]
  GEO --> LOC[出発地点の座標を確定]
  G -->|いいえ| LOC

  LOC --> ASSET[検索アセットを選択]
  ASSET --> PS1[周辺施設を検索]
  PS1 --> POI[候補一覧を確定]

  POI --> AI[AIが候補から場所を選ぶ]
  AI --> PLAN[AIが順番と経由地を決める]
  PLAN --> URL[Googleマップ用URLを生成]
  URL --> OUT[返却データを整形]
  OUT --> FE2[フロントへ返す]
  FE2 --> E[終了]